<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  <script src="https://d3js.org/d3.v4.min.js"></script>
  <style>
  .slideLine {
    stroke: black;
    stroke-width: 3px;
  }

  .item {
    margin: 20;
  }

  .row {
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  border: 1px solid blue;
  }

  .column {
  flex-basis: 100%;
  border: 1px solid green;
  }

  @media screen and (min-width: 800px) {
    .column {
      flex: 1;
    }
  }
  </style>
</head>

<body>
  <div class="row">
    <div class="column">
    </div>
    <div class="column">
    </div>
    <div class="column">
    </div>
  </div>
  <div class="row">
    <div class="column">
    </div>
    <div class="column">
    </div>
    <div class="column">
    </div>
  </div>
  <div class="row">
    <div class="column">
    </div>
    <div class="column">
    </div>
    <div class="column">
    </div>
  </div>
  <div class="row">
    <div class="column">
    </div>
    <div class="column">
    </div>
    <div class="column">
    </div>
  </div>
  <script>


  d3.selectAll(".column").append("svg")
    .attr("class", (d, i) => { return "item slider" + (i + 1) })
    .attr("width", "100%")
    .attr("height", "100%")

  let margin = {right: 20, left: 20},
    width = document.getElementsByClassName("column")[0].clientWidth,
    height = document.getElementsByClassName("item")[0].clientHeight;
    console.log(width, height)



  let xScale = d3.scaleLinear()
    .domain([0, 100])
    .range([0 + margin.left, width - margin.right])
    .clamp("true");

  d3.selectAll("svg").append("line")
    .attr("class", (d, i) => { return "slideLine line" + (i + 1) })
    .attr("x1", xScale.range()[0])
    .attr("x2", xScale.range()[1])
    .attr("y1", height / 2)
    .attr("y2", height / 2)

  d3.selectAll("line").insert("circle")
    .attr("class", (d, i) => { return "handle" + (i + 1) })
    .attr("cx", xScale.range()[1] / 2)
    .attr("r", 9)
    .call(d3.drag()
      .on("start drag", function() { handleSlide(xScale.invert(d3.event.x)) } ))

  console.log(xScale.range()[1] / 2)

  function handleSlide(d) {
    handle.attr("cx", xScale(d))
  }



  </script>
</body>
